---
import Layout from "../layouts/Layout.astro";
import wizualizacjaImage from "../assets/wizualizacja.png";
import carousel1 from "../assets/carousel1.jpeg";
import carousel2 from "../assets/carousel2.jpeg";
import carousel3 from "../assets/carousel3.jpeg";
import carousel4 from "../assets/carousel4.jpeg";
import Image from "astro/components/Image.astro";
import "aos/dist/aos.css";
---

<Layout title="Studio e? Cyan Chroma">
    <section class="hero-carousel full-bleed" aria-label="Karuzela realizacji">
        <div class="carousel-viewport">
            <div class="carousel-track" data-carousel>
                <figure class="carousel-slide">
                    <Image
                            src={carousel1}
                            width={carousel1.width}
                            height={carousel1.height}
                            alt="Salon w cieplych tonach z duzym oknem"
                            loading="eager"
                            fetchpriority="high"
                    />
                </figure>
                <figure class="carousel-slide">
                    <Image
                            src={carousel2}
                            width={carousel2.width}
                            height={carousel2.height}
                            alt="Jasna kuchnia z naturalnymi materialami"
                            loading="eager"
                            fetchpriority="high"
                    />
                </figure>
                <figure class="carousel-slide">
                    <Image
                            src={carousel3}
                            width={carousel3.width}
                            height={carousel3.height}
                            alt="Sypialnia z teksturami i miekkim swiatlem"
                            loading="eager"
                            fetchpriority="high"
                    />
                </figure>
                <figure class="carousel-slide">
                    <Image
                            src={carousel4}
                            width={carousel4.width}
                            height={carousel4.height}
                            alt="Strefa dzienna z kamieniem i drewnem"
                            loading="eager"
                            fetchpriority="high"
                    />
                </figure>
            </div>
            <button class="carousel-arrow prev" type="button" data-carousel-prev aria-label="Poprzednie zdjecie">
                <span aria-hidden="true">&lt;</span>
            </button>
            <button class="carousel-arrow next" type="button" data-carousel-next aria-label="Nastepne zdjecie">
                <span aria-hidden="true">&gt;</span>
            </button>
        </div>
        <div class="carousel-dots" role="tablist" aria-label="Wybierz slajd">
            <button class="carousel-dot is-active" type="button" data-carousel-dot="0" aria-label="Slajd 1" aria-current="true"></button>
            <button class="carousel-dot" type="button" data-carousel-dot="1" aria-label="Slajd 2"></button>
            <button class="carousel-dot" type="button" data-carousel-dot="2" aria-label="Slajd 3"></button>
            <button class="carousel-dot" type="button" data-carousel-dot="3" aria-label="Slajd 4"></button>
        </div>
    </section>
    <section class="hero">
        <div class="hero-content" data-aos="fade-up">
            <p class="eyebrow">Studio projektowania wnętrz</p>
            <h1>Wnętrza, które koją, działają i zostają z Tobą na lata.</h1>
            <p class="lead">
                Projektuję przestrzenie mieszkalne i komercyjne w duchu spokoju, naturalnych
                materiałów i świadomego światła. Każdy projekt powstaje wokół Twojego rytmu
                życia.
            </p>
            <div class="hero-actions" data-aos="fade-up" data-aos-delay="150">
                <a class="button" href="/portfolio">Zobacz realizacje</a>
                <a class="button secondary" href="/contact">Umów konsultację</a>
            </div>
            <dl class="stats" data-aos="fade-up" data-aos-delay="250">
                <div>
                    <dt>10+ lat</dt>
                    <dd>doświadczenia projektowego</dd>
                </div>
                <div>
                    <dt>48</dt>
                    <dd>zrealizowanych wnętrz</dd>
                </div>
                <div>
                    <dt>4 etapy</dt>
                    <dd>prowadzenia projektu</dd>
                </div>
            </dl>
        </div>
        <div class="hero-media" data-aos="fade-left" data-aos-delay="150">
            <div class="media-frame">
                <Image
                        src={wizualizacjaImage}
                        width={wizualizacjaImage.width}
                        height={wizualizacjaImage.height}
                        alt="Wizualizacja wnetrza"
                        loading="eager"
                        fetchpriority="high"
                />
            </div>
        </div>
    </section>

    <section class="section">
        <div class="section-header" data-aos="fade-up">
            <div>
                <p class="eyebrow">Specjalizacje</p>
                <h2>Projektowanie z myślą o codziennym komforcie</h2>
            </div>
            <a class="text-link" href="/offer">Pełna oferta</a>
        </div>
        <div class="section-grid">
            <article class="card" data-aos="fade-up" data-aos-delay="100">
                <h3>Domy i apartamenty</h3>
                <p>Spójne koncepcje wnętrz, od układu funkcjonalnego po detale wykończenia.</p>
                <ul class="tag-list">
                    <li>układ funkcji</li>
                    <li>dobór materiałów</li>
                    <li>nadzór autorski</li>
                </ul>
            </article>
            <article class="card" data-aos="fade-up" data-aos-delay="200">
                <h3>Wnętrza komercyjne</h3>
                <p>Salony usługowe i biura, które budują zaufanie i wspierają sprzedaż.</p>
                <ul class="tag-list">
                    <li>branding w przestrzeni</li>
                    <li>ergonomia</li>
                    <li>oświetlenie scen</li>
                </ul>
            </article>
            <article class="card" data-aos="fade-up" data-aos-delay="300">
                <h3>Projekt zmian</h3>
                <p>Modernizacja istniejących wnętrz bez generalnego remontu.</p>
                <ul class="tag-list">
                    <li>nowa paleta</li>
                    <li>stylizacja</li>
                    <li>dobór mebli</li>
                </ul>
            </article>
        </div>
    </section>

    <section class="section section-alt">
        <div class="section-header" data-aos="fade-up">
            <div>
                <p class="eyebrow">Proces</p>
                <h2>Przejrzyste etapy współpracy</h2>
            </div>
        </div>
        <ol class="steps">
            <li data-aos="fade-up" data-aos-delay="100">
                <strong>Diagnoza potrzeb</strong>
                <p>Spotkanie, analiza stylu życia i priorytetów funkcjonalnych.</p>
            </li>
            <li data-aos="fade-up" data-aos-delay="200">
                <strong>Koncepcja</strong>
                <p>Układ funkcjonalny, moodboardy i kierunek stylistyczny.</p>
            </li>
            <li data-aos="fade-up" data-aos-delay="300">
                <strong>Dokumentacja</strong>
                <p>Rysunki wykonawcze, zestawienia materiałów i wyposażenia.</p>
            </li>
            <li data-aos="fade-up" data-aos-delay="400">
                <strong>Realizacja</strong>
                <p>Nadzór autorski i wsparcie przy zakupach.</p>
            </li>
        </ol>
    </section>

    <section class="section">
        <div class="section-header" data-aos="fade-up">
            <div>
                <p class="eyebrow">Portfolio</p>
                <h2>Wybrane realizacje</h2>
            </div>
            <a class="text-link" href="/portfolio">Zobacz więcej</a>
        </div>
        <div class="section-grid">
            <article class="card" data-aos="fade-up" data-aos-delay="400">
                <div class="media-placeholder small">
                    <p>Apartament Mokotów</p>
                </div>
                <h3>Apartament Mokotów</h3>
                <p>130 m², stonowane beże, wyraźna oś światła dziennego.</p>
            </article>
            <article class="card" data-aos="fade-up" data-aos-delay="500">
                <div class="media-placeholder small">
                    <p>Dom pod lasem</p>
                </div>
                <h3>Dom pod lasem</h3>
                <p>Naturalne drewno, strukturalne tynki i miękkie kontrasty.</p>
            </article>
            <article class="card" data-aos="fade-up" data-aos-delay="600">
                <div class="media-placeholder small">
                    <p>Studio beauty</p>
                </div>
                <h3>Studio beauty</h3>
                <p>Elegancka recepcja, oświetlenie strefowe i podkreślony branding.</p>
            </article>
        </div>
    </section>

    <script>
        const carouselTrack = document.querySelector("[data-carousel]");
        if (carouselTrack) {
            const slides = Array.from(carouselTrack.querySelectorAll(".carousel-slide"));
            const dots = Array.from(document.querySelectorAll("[data-carousel-dot]"));
            const prevButton = document.querySelector("[data-carousel-prev]");
            const nextButton = document.querySelector("[data-carousel-next]");
            let activeIndex = 0;
            let autoplayId: any = null;

            const updateDots = () => {
                dots.forEach((dot, index) => {
                    const isActive = index === activeIndex;
                    dot.classList.toggle("is-active", isActive);
                    dot.setAttribute("aria-current", isActive ? "true" : "false");
                });
            };

            const scrollToIndex = (nextIndex: any) => {
                if (!slides.length) return;
                activeIndex = (nextIndex + slides.length) % slides.length;
                const target = slides[activeIndex];
                carouselTrack.scrollTo({ left: target.offsetLeft, behavior: "smooth" });
                updateDots();
            };

            prevButton?.addEventListener("click", () => {
                stopAutoplay();
                scrollToIndex(activeIndex - 1);
            });
            nextButton?.addEventListener("click", () => {
                stopAutoplay();
                scrollToIndex(activeIndex + 1);
            });
            dots.forEach((dot, index) => {
                dot.addEventListener("click", () => {
                    stopAutoplay();
                    scrollToIndex(index);
                });
            });

            let ticking = false;
            carouselTrack.addEventListener("scroll", () => {
                if (ticking) return;
                ticking = true;
                requestAnimationFrame(() => {
                    ticking = false;
                    const nextIndex = Math.round(carouselTrack.scrollLeft / carouselTrack.clientWidth);
                    if (nextIndex !== activeIndex) {
                        activeIndex = Math.max(0, Math.min(nextIndex, slides.length - 1));
                        updateDots();
                    }
                });
            });

            updateDots();

            const startAutoplay = () => {
                if (prefersReducedMotion || autoplayId) return;
                autoplayId = setInterval(() => scrollToIndex(activeIndex + 1), 4000);
            };

            const stopAutoplay = () => {
                if (!autoplayId) return;
                clearInterval(autoplayId);
                autoplayId = null;
            };

            startAutoplay();
        }
    </script>
</Layout>
